<%- include('../partials/header') %>

<section class="hero watercolor-right">
  <div class="container">
    <h1><%= t('programs.list.title') %></h1>
    <p><%= t('programs.list.copy') %></p>
  </div>
</section>

<div class="container watercolor-sand" style="margin-top: 3rem; margin-bottom: 4rem;">
  <% if (programs && programs.length > 0) { %>
    <div class="grid grid-2">
      <% programs.forEach(program => { %>
        <div class="card">
          <% if (program.image_url) { %>
            <img src="<%= program.image_url %>" alt="<%= program.title %>" style="width: 100%; height: 200px; object-fit: cover; border-radius: var(--border-radius) var(--border-radius) 0 0; margin: -1.5rem -1.5rem 1.5rem -1.5rem;">
          <% } %>

          <h2 class="card-title"><%= program.title %></h2>

          <div style="margin-bottom: 1.5rem;">
            <% if (program.age_range) { %>
              <div style="margin-bottom: 0.75rem;">
                <strong>ðŸ‘¥ <%= t('programs.list.age') %>:</strong>
                <span><%= program.age_range %></span>
              </div>
            <% } %>

            <% if (program.schedule) { %>
              <div style="margin-bottom: 0.75rem;">
                <strong>ðŸ“… <%= t('programs.list.schedule') %>:</strong>
                <span><%= program.schedule %></span>
              </div>
            <% } %>

            <% if (program.fee) { %>
              <div style="margin-bottom: 0.75rem;">
                <strong>ðŸ’µ <%= t('programs.list.fee') %>:</strong>
                <span>$<%= program.fee %></span>
              </div>
            <% } %>
          </div>

          <% if (program.description) { %>
            <p class="card-text" style="margin-bottom: 1.5rem;">
              <%= program.description.substring(0, 150) %><%= program.description.length > 150 ? '...' : '' %>
            </p>
          <% } %>

          <div class="card-footer">
            <a href="/programs/<%= program.id %>" class="btn btn-primary">
              <% if (isEnrolled[program.id]) { %>
                <%= t('programs.list.detail') %>
              <% } else { %>
                <%= t('programs.list.enroll') %>
              <% } %>
            </a>
            <% if (isEnrolled[program.id]) { %>
              <span class="badge badge-success" style="margin-left: 1rem;"><%= t('programs.list.enrolled') %></span>
            <% } %>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <div class="card text-center" style="padding: 4rem 2rem;">
      <h2 style="color: var(--text-secondary);"><%= t('programs.list.empty.title') %></h2>
      <p style="color: var(--text-light); margin-top: 1rem;"><%= t('programs.list.empty.copy') %></p>
    </div>
  <% } %>
</div>

<%-include('../partials/footer') %>
