<%- include('../partials/header') %>

<div class="container container-sm watercolor-green" style="margin-top: 3rem; margin-bottom: 4rem;">
  <div class="card">
    <h1 class="card-title" style="font-size: 2rem;"><%= t('user.survey.title') %></h1>
    <p style="color: var(--text-secondary); margin-bottom: 2rem;">
      <%= t('user.survey.copy') %>
    </p>

    <% if (success) { %>
      <div class="alert alert-success">
        <%= success %>
      </div>
    <% } %>

    <% if (error) { %>
      <div class="alert alert-error">
        <%= error %>
      </div>
    <% } %>

    <% if (events && events.length > 0) { %>
      <form action="/user/survey" method="POST">
        <div class="form-group">
          <label for="event_id" class="form-label"><%= t('user.survey.selectEvent') %></label>
          <select id="event_id" name="event_id" class="form-select" required>
            <option value=""><%= t('user.survey.selectPlaceholder') %></option>
            <% events.forEach(event => { %>
              <option value="<%= event.event_occurance_id %>">
                <%= event.title %> - <%= new Date(event.event_date_time_start).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) %>
              </option>
            <% }) %>
          </select>
        </div>

        <!-- Question 1: Satisfaction -->
        <div class="form-group">
          <label for="satisfaction_rating" class="form-label"><%= t('user.survey.q1') %></label>
          <select id="satisfaction_rating" name="satisfaction_rating" class="form-select" required>
            <option value=""><%= t('user.survey.ratingPlaceholder') %></option>
            <option value="5"><%= t('user.survey.opt.5') %></option>
            <option value="4"><%= t('user.survey.opt.4') %></option>
            <option value="3"><%= t('user.survey.opt.3') %></option>
            <option value="2"><%= t('user.survey.opt.2') %></option>
            <option value="1"><%= t('user.survey.opt.1') %></option>
          </select>
        </div>

        <!-- Question 2: Usefulness -->
        <div class="form-group">
          <label for="usefulness_rating" class="form-label"><%= t('user.survey.q2') %></label>
          <select id="usefulness_rating" name="usefulness_rating" class="form-select" required>
            <option value=""><%= t('user.survey.ratingPlaceholder') %></option>
            <option value="5"><%= t('user.survey.opt.5') %></option>
            <option value="4"><%= t('user.survey.opt.4') %></option>
            <option value="3"><%= t('user.survey.opt.3') %></option>
            <option value="2"><%= t('user.survey.opt.2') %></option>
            <option value="1"><%= t('user.survey.opt.1') %></option>
          </select>
        </div>

        <!-- Question 3: Instructor -->
        <div class="form-group">
          <label for="instructor_rating" class="form-label"><%= t('user.survey.q3') %></label>
          <select id="instructor_rating" name="instructor_rating" class="form-select" required>
            <option value=""><%= t('user.survey.ratingPlaceholder') %></option>
            <option value="5"><%= t('user.survey.opt.5') %></option>
            <option value="4"><%= t('user.survey.opt.4') %></option>
            <option value="3"><%= t('user.survey.opt.3') %></option>
            <option value="2"><%= t('user.survey.opt.2') %></option>
            <option value="1"><%= t('user.survey.opt.1') %></option>
          </select>
        </div>

        <!-- Question 4: Recommendation -->
        <div class="form-group">
          <label for="recommendation_rating" class="form-label"><%= t('user.survey.q4') %></label>
          <select id="recommendation_rating" name="recommendation_rating" class="form-select" required>
            <option value=""><%= t('user.survey.ratingPlaceholder') %></option>
            <option value="5"><%= t('user.survey.opt.5') %></option>
            <option value="4"><%= t('user.survey.opt.4') %></option>
            <option value="3"><%= t('user.survey.opt.3') %></option>
            <option value="2"><%= t('user.survey.opt.2') %></option>
            <option value="1"><%= t('user.survey.opt.1') %></option>
          </select>
        </div>

        <!-- Additional Feedback -->
        <div class="form-group">
          <label for="additional_feedback" class="form-label"><%= t('user.survey.additional') %></label>
          <textarea
            id="additional_feedback"
            name="additional_feedback"
            class="form-textarea"
            placeholder="Share any additional thoughts or suggestions..."
            rows="6"
          ></textarea>
        </div>

        <button type="submit" class="btn btn-primary btn-block btn-lg">
          <%= t('user.survey.submit') %>
        </button>
      </form>
    <% } else { %>
      <div class="alert alert-info">
        <p><%= t('user.survey.empty') %></p>
        <p style="margin-top: 1rem;">
          <a href="/events" style="color: #CE325B; font-weight: 600;"><%= t('user.survey.empty.link') %></a>
        </p>
      </div>
    <% } %>
  </div>
</div>

<%- include('../partials/footer') %>
