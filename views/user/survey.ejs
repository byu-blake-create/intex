<%- include('../partials/header') %>

<div class="container container-sm" style="margin-top: 3rem; margin-bottom: 4rem;">
  <div class="card">
    <h1 class="card-title" style="font-size: 2rem;">Submit Event Feedback</h1>
    <p style="color: var(--text-secondary); margin-bottom: 2rem;">
      We value your feedback! Please share your thoughts about an event you attended.
    </p>

    <% if (success) { %>
      <div class="alert alert-success">
        <%= success %>
      </div>
    <% } %>

    <% if (error) { %>
      <div class="alert alert-error">
        <%= error %>
      </div>
    <% } %>

    <% if (events && events.length > 0) { %>
      <form action="/user/survey" method="POST">
        <div class="form-group">
          <label for="event_id" class="form-label">Select Event</label>
          <select id="event_id" name="event_id" class="form-select" required>
            <option value="">-- Choose an event --</option>
            <% events.forEach(event => { %>
              <option value="<%= event.id %>">
                <%= event.title %> - <%= new Date(event.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) %>
              </option>
            <% }) %>
          </select>
        </div>

        <!-- Question 1: Satisfaction -->
        <div class="form-group">
          <label for="satisfaction_rating" class="form-label">How satisfied were you with this event?</label>
          <select id="satisfaction_rating" name="satisfaction_rating" class="form-select" required>
            <option value="">-- Select rating --</option>
            <option value="5">⭐⭐⭐⭐⭐ Very Satisfied</option>
            <option value="4">⭐⭐⭐⭐ Satisfied</option>
            <option value="3">⭐⭐⭐ Neutral</option>
            <option value="2">⭐⭐ Dissatisfied</option>
            <option value="1">⭐ Very Dissatisfied</option>
          </select>
        </div>

        <!-- Question 2: Usefulness -->
        <div class="form-group">
          <label for="usefulness_rating" class="form-label">How useful was this event?</label>
          <select id="usefulness_rating" name="usefulness_rating" class="form-select" required>
            <option value="">-- Select rating --</option>
            <option value="5">⭐⭐⭐⭐⭐ Extremely Useful</option>
            <option value="4">⭐⭐⭐⭐ Very Useful</option>
            <option value="3">⭐⭐⭐ Moderately Useful</option>
            <option value="2">⭐⭐ Slightly Useful</option>
            <option value="1">⭐ Not Useful</option>
          </select>
        </div>

        <!-- Question 3: Instructor -->
        <div class="form-group">
          <label for="instructor_rating" class="form-label">How would you rate the instructor of this event?</label>
          <select id="instructor_rating" name="instructor_rating" class="form-select" required>
            <option value="">-- Select rating --</option>
            <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
            <option value="4">⭐⭐⭐⭐ Good</option>
            <option value="3">⭐⭐⭐ Average</option>
            <option value="2">⭐⭐ Below Average</option>
            <option value="1">⭐ Poor</option>
          </select>
        </div>

        <!-- Question 4: Recommendation -->
        <div class="form-group">
          <label for="recommendation_rating" class="form-label">How likely are you to recommend this event to a friend?</label>
          <select id="recommendation_rating" name="recommendation_rating" class="form-select" required>
            <option value="">-- Select rating --</option>
            <option value="5">⭐⭐⭐⭐⭐ Very Likely</option>
            <option value="4">⭐⭐⭐⭐ Likely</option>
            <option value="3">⭐⭐⭐ Neutral</option>
            <option value="2">⭐⭐ Unlikely</option>
            <option value="1">⭐ Very Unlikely</option>
          </select>
        </div>

        <!-- Additional Feedback -->
        <div class="form-group">
          <label for="additional_feedback" class="form-label">Additional Feedback (Optional)</label>
          <textarea
            id="additional_feedback"
            name="additional_feedback"
            class="form-textarea"
            placeholder="Share any additional thoughts or suggestions..."
            rows="6"
          ></textarea>
        </div>

        <button type="submit" class="btn btn-primary btn-block btn-lg">
          Submit Survey
        </button>
      </form>
    <% } else { %>
      <div class="alert alert-info">
        <p>You don't have any attended events to provide feedback for yet.</p>
        <p style="margin-top: 1rem;">
          <a href="/events" style="color: #CE325B; font-weight: 600;">Browse upcoming events →</a>
        </p>
      </div>
    <% } %>
  </div>
</div>

<%- include('../partials/footer') %>
